---
layout: prototype-without-header
title: Annotations
---

<main class="annotation-details dark-mode">

  <header class="annotation-details__header">

    <div class="annotation-details__header-title">
      <h1 class="heading-4">Edit annotations</h1>

      <p class="annotation-details__header-meta body-4">
        These edits will mark this image as verified
      </p>
    </div>

    <div class="annotation-details__header-action">
      <a
        href="/"
        class="button button--medium"
        >
        <svg class="icon icon--small"><use xlink:href="#icon-chevron-down"></use></svg>
        Add annotation
      </a>
    </div>

  </header>

  <script>
  function closest(element, tagName) {

    // If the element is the target
    if (element.nodeName.toLowerCase() === tagName) return element;

    var ancestor = element;
    while ((ancestor = ancestor.parentElement) && ancestor.nodeName && ancestor.nodeName.toLowerCase() !== tagName);
    if (ancestor && ancestor.nodeName && ancestor.nodeName.toLowerCase() === tagName) {
      return ancestor;
    }
  }
  function onSvgClick(event) {
    console.log(event.target);
    const group = closest(event.target, "g");
    const parent = group.parentNode;
    parent.removeChild(group);
    parent.appendChild(group);

    document.querySelector("[data-annotation-field]").value = group.querySelector("text").textContent;

    document.querySelector("[data-annotation-figure]").style.setProperty("--field-x", group.getAttribute("data-field-x"));
    document.querySelector("[data-annotation-figure]").style.setProperty("--field-y", group.getAttribute("data-field-y"));

    document.querySelector(`.annotation-details__figure`).classList.add(`annotation-details__figure--active`);
    document.querySelector(`.annotation-field input`).focus();
  }
  </script>

  <figure
    class="annotation-details__figure"
    data-annotation-figure
    style="
      --image-width: 1920;
      --image-height: 1080;
      --field-x: 640;
      --field-y: 240;
      "
    >
    <img class="annotation-details__figure-image" src="https://fathomnet.org/static/m3/framegrabs/Doc%20Ricketts/images/0620/03_19_38_11.png" alt="Paragorgia arborea" />
    <svg onClick="window.onSvgClick(event)" class="annotation-details__figure-svg" viewBox="0 0 1920 1080" xmlns="http://www.w3.org/2000/svg">
      <g style="--color: #FEFF00;" data-field-x="1040" data-field-y="140">
        <text fill="white" x="1040" y="440" style="font-size: 3em" class="annotation">Bathochordaeus</text>
        <path fill="none" stroke-width="10" stroke="white"
          d="
            m 1040 140
            h 500
            v 300
            h -500
            z
          ">
        </path>
      </g>
      <g style="--color: #11AFF0;" data-field-x="640" data-field-y="240">
        <text fill="white" x="640" y="640" style="font-size: 3em" class="annotation">Paragorgia arborea</text>
        <path fill="none" stroke-width="10" stroke="white"
          d="
            m 640 240
            h 500
            v 400
            h -500
            z
          ">
        </path>
      </g>
      <g style="--color: #EF5DA7;" data-field-x="400" data-field-y="400">
        <text fill="white" x="400" y="700" style="font-size: 3em" class="annotation">Aegina</text>
        <path fill="none" stroke-width="10" stroke="white"
          d="
            m 400 400
            h 300
            v 300
            h -300
            z
          ">
        </path>
      </g>
    </svg>
    <div class="annotation-details__figure-field-container">
      <label class="field field--has-placeholder field--has-icon annotation-field">
        <span class="field__label">Annotation</span>
        <input
          type="text"
          class="field__input"
          value=""
          placeholder="Annotation"
          data-annotation-field />
          
        <svg class="icon field__icon"><use xlink:href="#icon-edit"></use></svg>
      </label>
    </div>
  </figure>

  <footer class="details-footer annotation-details__footer">
    <div class="details-footer__action-primary">
      <a
        href="/image-details/"
        class="button button--medium button--primary"
        >
        Save and verify
      </a>
      <a
        href="/image-details/"
        class="button button--medium"
        >
        Save
      </a>
    </div>
    <div class="details-footer__nav">
      <ul class="details-footer__nav-list">
        <li class="details-footer__nav-item">
          <a
            class="link link--has-active-indicator"
            href="/annotations/"
            >
            <span class="link__active-indicator">Next</span>
            <svg class="icon"><use xlink:href="#icon-arrow-right"></use></svg>
          </a>
        </li>
        <li class="details-footer__nav-item">
          <a
            class="link link--has-active-indicator"
            href="/annotations/"
            >
            <svg class="icon"><use xlink:href="#icon-arrow-left"></use></svg>
            <span class="link__active-indicator">Previous</span>
          </a>
        </li>
      </ul>
      <p class="details-footer__nav-meta">1/468 images</p>
    </div>
    <div class="details-footer__action-secondary">
      <a
        href="/image-details/"
        class="button button--medium"
        >
        Cancel
      </a>
    </div>
  </footer>

</main>
